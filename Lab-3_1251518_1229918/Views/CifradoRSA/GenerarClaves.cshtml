@{
    Layout = null;
    
    //se notifica al usuario que los numeros ingresados deben ser primos
    if (ViewBag.Primo == 0)
    {
    <div class="alertError">
    <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
    <strong>ERROR!</strong> Ambos numeros deben ser primos, por favor ingreselos nuevamente.
    </div>
        
    } 
    else if (ViewBag.Primo == 1)
    {
    
    <div class="alertSuccess">
    <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
    <strong>CORRECTO!</strong> Las claves han sido generadas correctamente.  
    </div>
    <center>
    <textarea id="LlavePublica">@ViewBag.eValue , @ViewBag.nValue</textarea> 
    <input type="button" id="descargarPublica" value="Descargar Llave Pública"/>
    <textarea id="LlavePrivada">@ViewBag.dValue , @ViewBag.nValue</textarea> 
    <input type="button" id="descargarPrivada" value="Descargar Llave Privada"/>
    </center>

    }

 }

    <script>
    //funcion para descargar las llaves
    function download(filename, text) {
        var element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);

        element.style.display = 'none';
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
    }
    //generar archivo llave publica
    document.getElementById("descargarPublica").addEventListener("click", function(){
        var text = document.getElementById("LlavePublica").value;
        var filename = "public.key";
        
        download(filename, text);
    }, false);
    
    //generar archivo llave privada
    document.getElementById("descargarPrivada").addEventListener("click", function(){
        var text = document.getElementById("LlavePrivada").value;
        var filename = "private.key";
        
        download(filename, text);
    }, false);
    </script>
<style>
    .alertError {
        padding: 20px;
        background-color: #ff8181;
        color: wheat;
        font-weight: bold;
    }
    .alertSuccess {
        padding: 20px;
        background-color: #5ab300;
        color: wheat;
        font-weight: bold;
    }
    .closebtn {
      margin-left: 15px;
      color: white;
      font-weight: bold;
      float: right;
      font-size: 22px;
      line-height: 20px;
      cursor: pointer;
      transition: 0.3s;
    }

    .closebtn:hover {
      color: black;
    }
    textarea{
        display: none;
    }
    h1,label {
        color: wheat;
        font-weight: bold;
    }

    body {
        background-color: #4C2222;
    }

    #volver {
        background-color: #331717;
        border: none;
        color: white;
        padding: 8px 16px;
        text-decoration: none;
        margin: 4px 2px;
        cursor: pointer;
        text-align: center;
        font-weight: bold;
    }
    #cargar, #descargarPublica, #descargarPrivada {
        background-color: #e56767;
        border: none;
        color: white;
        padding: 8px 16px;
        text-decoration: none;
        margin: 4px 2px;
        cursor: pointer;
        text-align: center;
        font-weight: bold;
    }
    input[type=number] {
        padding: 5px 20px;
        margin: 8px 0;
        border: 1px solid #555;
        outline: none;
        font-weight: bold;
        width: 80px;
    }

        input[type=number]:focus {
            background-color: #ffe3e3;
        }
</style>

<body>
    <center>
        <h1>Por favor, seleccione los Valores p y q para generar las claves</h1>

        @using (Html.BeginForm("GenerarLLaves", "CifradoRSA", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            <label>P: <input type="number" id="p" name="p" value=" " min="2" required/></label><br />
            <label>Q: <input type="number" id="q" name="q" value=" " min="2" required/></label><br />
            <input id="cargar" type="submit" value="Generar Claves" />
        }
        <form action="~/CifradoRSA/Index">
            <input id="volver" type="submit" value="Volver Al Menú de Cifrado RSA" />
        </form>
    </center>
</body>
